<!DOCTYPE html>
<html>
<head>
<title>连连看</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<script src="go.js"></script>
<link href="./assets/css/genproto.css" rel="stylesheet" type="text/css" />
<script src="genproto.js"></script>
<script id="code">

  var lastStroked = null;  // this remembers the last highlit Shape

</script>
<script src="assets/js/main.js"></script>
<script>

  // Make all ports on a node visible when the mouse is over the node
  function showPorts(node, show) {
    var diagram = node.diagram;
    if (!diagram || diagram.isReadOnly || !diagram.allowLink) return;
    node.ports.each(function(port) {
        port.stroke = (show ? "white" : null);
      });
  }

////////////////////////new added///////////////////////////
  // Allow the user to edit text when a single node is selected
  function onSelectionChanged(e) {
    var node = e.diagram.selection.first();
    if (node instanceof go.Node) {
      updateProperties(node.data);
    } else {
      updateProperties(null);
    }
  }


  function appendNodes(parentdiv, param) {
      var tr = document.createElement('tr');
      var label_td = document.createElement('td');
      var content_td = document.createElement('td');
      label_td.innerHTML = param + ":";
      var input = document.createElement('input');
      input.setAttribute("type", "text");
      input.setAttribute("id",param);
      input.setAttribute("onchange", "updateData(this.value, '"+param+"')");
      content_td.appendChild(input);
      tr.appendChild(label_td);
      tr.appendChild(content_td);
      parentdiv.appendChild(tr);
  }

  function apppendSelectNodes(parentdiv, param) {
      var tr = document.createElement('tr');
      var label_td = document.createElement('td');
      var content_td = document.createElement('td');
      label_td.innerHTML = param + ":";
      var select = document.createElement('select');
      select.setAttribute("id",param);
      select.setAttribute("onchange", "updateData(this.value, '"+param+"')");
      var option0 = document.createElement('option');
      option0.setAttribute("value", "");
      option0.innerHTML="";
      var option1 = document.createElement('option');
      option1.setAttribute("value", "TRAIN");
      option1.innerHTML="TRAIN";
      var option2 = document.createElement('VALUE');
      option2.setAttribute("value", "TEST");
      option2.innerHTML="TEST";
      select.appendChild(option0);
      select.appendChild(option1);
      select.appendChild(option2);
      content_td.appendChild(select);
      tr.appendChild(label_td);
      tr.appendChild(content_td);
      parentdiv.appendChild(tr);
  }

  function appendFillerNodes(parentdiv, param) {
      var tr0 = document.createElement('tr');
      var label_td0 = document.createElement('td');
      label_td0.innerHTML = param;
      tr0.appendChild(label_td0);
      parentdiv.appendChild(tr0);

      var tr = document.createElement('tr');
      var label_td = document.createElement('td');
      var content_td = document.createElement('td');
      var select = document.createElement('select');
      label_td.innerHTML = "type: ";
      label_td.setAttribute("style", "float:right");
      select.setAttribute("id",param+"_type");
      select.setAttribute("onchange", "updateData(this.value, '"+param+"_type')");
      var option0 = document.createElement('option');
      option0.setAttribute("value", "");
      option0.innerHTML="";
      var option1 = document.createElement('option');
      option1.setAttribute("value", "constant");
      option1.innerHTML="constant";
      var option2 = document.createElement('option');
      option2.setAttribute("value", "xavier");
      option2.innerHTML="xavier";
      var option3 = document.createElement('option');
      option3.setAttribute("value", "uniform");
      option3.innerHTML="uniform";
      var option4 = document.createElement('option');
      option4.setAttribute("value", "gaussian");
      option4.innerHTML="gaussian";
      select.appendChild(option0);
      select.appendChild(option1);
      select.appendChild(option2);
      select.appendChild(option3);
      select.appendChild(option4);
      content_td.appendChild(select);
      tr.appendChild(label_td);
      tr.appendChild(content_td);
      parentdiv.appendChild(tr);

      for (var i = 0; i < _filler_info.length; ++i) {
        var tr1 = document.createElement('tr');
        var label_td1 = document.createElement('td');
        var content_td1 = document.createElement('td');
        //label_td1.innerHTML = "value: ";
        label_td1.innerHTML = _filler_info[i]+":";
        label_td1.setAttribute("style", "float:right;");
        var input1 = document.createElement('input');
        input1.setAttribute("type", "text");
        input1.setAttribute("id",param+"_"+_filler_info[i]);
        input1.setAttribute("onchange", "updateData(this.value, '"+param+"_"+_filler_info[i]+"')");
        content_td1.appendChild(input1);
        tr1.appendChild(label_td1);
        tr1.appendChild(content_td1);
        tr1.setAttribute("style","display:none;");
        parentdiv.appendChild(tr1);
      }
  }

  function appendParameters(param_list, category) {
    var parentdiv = document.getElementById("propertiesTable");
    // remove all elements except 'name'
    var childnode_list = parentdiv.childNodes;
    var childnode_num = childnode_list.length;
    //console.log(childnode_list);
    var child_start = 2;
    for (var i = child_start; i < childnode_num; ++i) {
      parentdiv.removeChild(childnode_list[child_start]);
    }
    // append new elements
    if (category != "BLOB") {
      apppendSelectNodes(parentdiv, "phase");
    }
    if (param_list) {
      var param_num = param_list.length;
      for (var i = 0; i < param_num; ++i) {
        if (param_list[i] == "weight_filler" || param_list[i] == "bias_filler" ||
            param_list[i] == "scale_filler" || param_list[i] == "shift_filler" || param_list[i] == "data_filler") {
          appendFillerNodes(parentdiv, param_list[i]);
        }
        else if (param_list[i].search("filler") >= 0) {
          continue;
        }
        else {
          appendNodes(parentdiv, param_list[i]);
        }
      }
    }
  }

  function get_param_list(_raw_param) {
    var param_list = [];
    if (_raw_param) {
      var _param = _raw_param[0];
      //console.log(_param);
      for (var _key_param in _param) {
        var obj_list = _param[_key_param];
        for (var i = 0; i < obj_list.length; ++i) {
          for (_key_obj in obj_list[i]) {
            param_list.push(_key_obj);
            if (_key_obj == "weight_filler" || _key_obj == "bias_filler"
               || _key_obj == "scale_filler" || _key_obj == "shift_filler"
               || _key_obj == "data_filler") {
              param_list.push(_key_obj+"_type");
              for (var j = 0;j < _filler_info.length; ++j) {
                param_list.push(_key_obj+"_"+_filler_info[j]);
              }
            }
          }
        }
      }
    }
    return param_list;
  }

  function get_param_default(_raw_param) {
    var param_default = {};
    if (_raw_param) {
      var _param = _raw_param[0];
      //console.log(_param);
      for (var _key_param in _param) {
        var obj_list = _param[_key_param];
        for (var i = 0; i < obj_list.length; ++i) {
          for (_key_obj in obj_list[i]) {
            param_default[_key_obj] = obj_list[i][_key_obj];
          }
        }
      }
    }
    return param_default;
  }

  function show_network_filler(data, type, param) {
    // restore
    for (var i = 0; i < _filler_info.length; ++i) {
      document.getElementById(param + "_" + _filler_info[i]).parentNode.parentNode.setAttribute("style", "display:none;");
    }
    // display by selection
    if (type == "constant") {
      if (param == "scale_filler") {
        document.getElementById(param + "_value").value = data[param+"_value"] || 1;
      } else {
        document.getElementById(param + "_value").value = data[param+"_value"] || 0;
      }
      document.getElementById(param + "_value").parentNode.parentNode.setAttribute("style", "");
    } else if (type == "uniform") {
      document.getElementById(param + "_min").value = data[param+"_min"] || 0;
      document.getElementById(param + "_min").parentNode.parentNode.setAttribute("style", "");
      document.getElementById(param + "_max").value = data[param+"_max"] || 1;
      document.getElementById(param + "_max").parentNode.parentNode.setAttribute("style", "");
    } else if (type == "gaussian") {
      document.getElementById(param + "_mean").value = data[param+"_mean"] || 0;
      document.getElementById(param + "_mean").parentNode.parentNode.setAttribute("style", "");
      document.getElementById(param + "_std").value = data[param+"_std"] || 1;
      document.getElementById(param + "_std").parentNode.parentNode.setAttribute("style", "");
    }
  }

  // Update the HTML elements for editing the properties of the currently selected node, if any
  function updateProperties(data) {
    if (data === null) {
      document.getElementById("propertiesPanel").style.display = "none";
    } else {
      var category = data.category;
      var param_list = get_param_list(_layers[category]);
      var param_default = get_param_default(_layers[category]);
      //document.getElementById("propertiesPanel").style.display = "block";
      // append div element
      appendParameters(param_list, category);
      // update value
      document.getElementById("name").value = data.name || "";
      document.getElementById("category").value = data.category || "";
      if (category != "BLOB") {
        document.getElementById("phase").value = data.phase || "";
      }
      if (param_list) {
        var param_num = param_list.length;
        for (var i = 0; i < param_num; ++i) {
          if (param_list[i].search("filler") < 0) {
            document.getElementById(param_list[i]).value = eval('data.'+param_list[i]) || "";
          } else {
            // filler default setting
            //console.log(data["weight_filler_type"]);
            if (param_list[i] == "weight_filler") {
              if (!data[param_list[i]+"_type"]) {
                // initialize
                data[param_list[i]] = "default";
                data[param_list[i]+"_type"] = "xavier";
              }
              document.getElementById(param_list[i] + "_type").value = data[param_list[i]+"_type"] || "xavier";
              show_network_filler(data, document.getElementById(param_list[i] + "_type").value, param_list[i]);
            } else if (param_list[i] == "bias_filler" ||
                       param_list[i] == "scale_filler" ||
                       param_list[i] == "shift_filler" ||
                       param_list[i] == "data_filler" ) {
              if (!data[param_list[i]+"_type"]) {
                // initialize
                data[param_list[i]] = "default";
                data[param_list[i]+"_type"] = "constant";
              }
              document.getElementById(param_list[i] + "_type").value = data[param_list[i]+"_type"] || "constant";
              show_network_filler(data, document.getElementById(param_list[i] + "_type").value, param_list[i]);
            }
          }

          //console.log('data.'+param_list[i]);
        }
      }
      if (param_default) {
        for (var _key_param in param_default) {
          if (document.getElementById(_key_param)) {
            document.getElementById(_key_param).placeholder = param_default[_key_param];
          }
          //console.log('data.'+param_list[i]);
        }
      }
      document.getElementById("propertiesPanel").style.display = "block";
    }
  }

  // This is called when the user has finished inline text-editing
  function onTextEdited(e) {
    var tb = e.subject;
    if (tb === null || !tb.name) return;
    var node = tb.part;
    if (node instanceof go.Node) {
      updateProperties(node.data);
    }
  }

  // Update the data fields when the text is changed
  function updateData(text, field) {
    var node = myDiagram.selection.first();
    // maxSelectionCount = 1, so there can only be one Part in this collection
    var data = node.data;
    var category = data.category;
    if (node instanceof go.Node && data !== null) {
      var model = myDiagram.model;
      var param_list = get_param_list(_layers[category]);
      model.startTransaction("modified " + field);
      if (field === "name") {
        model.setDataProperty(data, "name", text);
      }
      else if (field === "phase"){
        model.setDataProperty(data, "phase", text);
      }
      else if (field.search("filler") >= 0) {
        if (field == "weight_filler") {
          if (!data["weight_filler_type"]) {
            data["weight_filler_type"] = "xavier";
          }
        } else {
          if (!data[field + "_type"]) {
            data[field + "_type"] = "constant";
            if (field == "scale_filler") {
              data[field + "_value"] = 1;
            } else {
              data[field + "_value"] = 0;
            }
          }
        }
        //if (data["weight_filler_type"] || data["bias_filler_type"]) {
        model.setDataProperty(data, field, text);
        //}
      } else {
        if (param_list) {
          var param_num = param_list.length;
          for (var i = 0 ; i < param_num; ++i) {
            if(field === param_list[i]) {
              model.setDataProperty(data, param_list[i], text);
            }
          }
        }
      }
      model.commitTransaction("modified " + field);
    }
    // save immediately after modification
    updateProperties(data);
    save();
  }
////////////////////////new added finished///////////////////////////

  //diagram -> saved_model
  function save() {

    _model = myDiagram.model.toJson();
    document.getElementById("mySavedModel").value = _model;
    document.getElementById("prototxt").value = save_prototxt(eval('['+_model+']'));
    gen_map_size_from_struct(myDiagram.model["nodeDataArray"], myDiagram.model["linkDataArray"]);
    compute_attr_info(myDiagram.model["nodeDataArray"], myDiagram.model["linkDataArray"]);
    myDiagram.isModified = false;
  }

  //saved_model -> diagram
  function load() {
    _model = document.getElementById("mySavedModel").value;
    myDiagram.model = go.Model.fromJson(_model);
    document.getElementById("prototxt").value = save_prototxt(eval('['+_model+']'));
    gen_map_size_from_struct(myDiagram.model["nodeDataArray"], myDiagram.model["linkDataArray"]);
    compute_attr_info(myDiagram.model["nodeDataArray"], myDiagram.model["linkDataArray"]);
  }
  // add an SVG rendering of the diagram at the end of this page
  function makeSVG() {
    var svg = myDiagram.makeSvg({
        scale: 1
      });
    svg.style.border = "1px solid black";
    obj = document.getElementById("SVGArea");
    obj.appendChild(svg);
    if (obj.children.length > 0)
      obj.replaceChild(svg, obj.children[0]);
  }

</script>
<script>
    function convertImageToCanvas(image) {
      var canvas = document.createElement("canvas");
      canvas.width = image.width;
      canvas.height = image.height;
      canvas.getContext("2d").drawImage(image, 0, 0);

      return canvas;
    }

    function save_to_image() {
      var image = new Image();
      var obj = document.getElementById("myDiagram");
      var _canvas = obj.childNodes[0];
      image.src = _canvas.toDataURL("1.png");
      var png = convertImageToCanvas(image);
      document.getElementById("newArea").appendChild(png);
      //return image;
    }
</script>
<script>
function saveTextAsFile()
{
    var textToWrite = document.getElementById("prototxt").value;
    var textFileAsBlob = new Blob([textToWrite], {type:'text/plain'});
    var fileNameToSaveAs = "prototxt.txt";
    var downloadLink = document.createElement("a");
    downloadLink.download = fileNameToSaveAs;
    downloadLink.innerHTML = "Download File";
    if (window.webkitURL != null)
    {
        // Chrome allows the link to be clicked
        // without actually adding it to the DOM.
        downloadLink.href = window.webkitURL.createObjectURL(textFileAsBlob);
    }
    else
    {
        // Firefox requires the link to be added to the DOM
        // before it can be clicked.
        downloadLink.href = window.URL.createObjectURL(textFileAsBlob);
        downloadLink.onclick = destroyClickedElement;
        downloadLink.style.display = "none";
        document.body.appendChild(downloadLink);
    }

    downloadLink.click();
}
</script>
<script>

function clickUpload() {
  document.getElementById("upload_file").click();
}

function uploadAndSubmit() {

  if (document.getElementById("upload_file").files.length === 0) { return; }
  var file = document.getElementById("upload_file").files[0];
  //if (file.type != "text/plain") {
  //  alert("Invalid file type!");
  //  return;
  //}

  var reader = new FileReader();

  reader.onloadstart = function() {
     console.log("onloadstart");
  }
  reader.onprogress = function(p) {
     console.log("onprogress");
  }

  reader.onload = function() {
     console.log("load complete");
  }

  reader.onloadend = function() {
      if (reader.error) {
         console.log(reader.error);
      } else {
         document.getElementById("prototxt").value = reader.result;
      }
  }

  reader.readAsText(file);
}
</script>
<script>

function unique(arr) {
  var result = [], hash = {};
  for (var i = 0, elem; (elem = arr[i]) != null; i++) {
      if (!hash[elem]) {
          result.push(elem);
          hash[elem] = true;
      }
  }
  return result;
}
</script>
<script src="assets/js/stat.js"></script>
<script>
function gen_simplified_struct() {
  save();

  var _struct_json = document.getElementById("mySavedModel").value;
  var _model = go.Model.fromJson(_struct_json);
  //console.log(_model["nodeDataArray"]);
  document.getElementById("mySavedModel").value = gen_loc_from_layers(_model["nodeDataArray"], _model["linkDataArray"], _model);

  load();
}



String.prototype.trim = function(patterns) {
  var result = "";
  for (var i = 0; i < this.length; i++) {
    var valid = true;
    for (var j = 0; j < patterns.length; j++) {
      if (this[i] == patterns[j]) {
        valid = false;
      }
    }
    if (valid == true) {
      result += this[i];
    }
  }
  return result;
}

function remove_quotation(str) {
  if (str) {
    var len = str.length;
    if (len > 2) {
      if (str[0] == "\"" && str[len - 1] == "\"") {
        return str.substr(1, len-2);
      } else {
        return str;
      }
    }
  }
  return str;
}
</script>
<script src="assets/js/parser_new.js"></script>
<script>

function gen_model_from_prototxt() {
  var prototxt = format(document.getElementById("prototxt").value);
  var block_tree = get_block_tree(prototxt);
  var proto_tree = get_proto_tree(block_tree, prototxt);
  var layers = get_layers(proto_tree);
  var nodeDataArray = get_node_data_array(layers);
  var linkDataArray = get_link_data_array(layers);
  console.log(linkDataArray);

  var _struct_json = {};
  _struct_json["class"] = "go.GraphLinksModel";
  _struct_json["linkFromPortIdProperty"] = "fromPort";
  _struct_json["linkToPortIdProperty"] = "toPort";
  _struct_json["nodeDataArray"] = nodeDataArray;
  _struct_json["linkDataArray"] = linkDataArray;

  var _model = go.Model.fromJson(_struct_json);
  document.getElementById("mySavedModel").value = gen_loc_from_layers(_model["nodeDataArray"], _model["linkDataArray"], _model);
  load()
}


</script>
<script type="text/javascript" src="data.json"></script>
<script>
  //console.log(_layers_info);
  _layers = _layers_info[0];
  _filler_info = ["value", "min", "max", "mean", "std"];
</script>
</head>
<body onload="init()">
<div style="text-align:center;">
<h1>Caffe Prototxt Generator</h1>
</div>
<div id="sample">
  <div style="width:100%; white-space:nowrap;">
    <span style="display: inline-block; vertical-align: top; padding: 5px; width:15%">
      <h2>Blob</h2>
      <div id="BLOB" style="border: solid 1px gray; height: 60px"></div>
      <h2>Data Layers</h2>
      <div id="myPalette" style="border: solid 1px gray; height: 250px"></div>
      <h2>Common Layers</h2>
      <div id="myPalette1" style="border: solid 1px gray; height: 250px"></div>
    </span>

    <span style="display: inline-block; vertical-align: top; padding: 5px; width:58%">
      <div id="myDiagram" style="border: solid 1px gray; height: 720px"></div>
      <div id="infoBoxHolder">
        <!-- Initially Empty, it is populated when updateInfoBox is called -->
      </div>
    </span>

    <span style="display: inline-block; vertical-align: top; padding: 5px; width:22%">
        <table>
          <tr>
            <td><button onclick="gen_simplified_struct()" style="display:block;">Simplify</button></td>
            <td><button id="SaveButton" onclick="save()" style="display:block;">Save</button></td>
            <td><button onclick="gen_model_from_prototxt()" style="display:block;">Load</button></td>
          </tr>
          <tr>
            <td><button onclick="saveTextAsFile()" style="display:block;">Download</button></td>
            <td>
              <button onclick="clickUpload()" style="display:block;">Upload</button>
              <input type="file" name="file" id="upload_file" style="display:none;" onchange="uploadAndSubmit();"/>
            </td>
          </tr>
        </table>
        <div style="margin-top: 10px;">
          Model size is about: <b id="model_size">1</b> MB
        </div>
        <div style="">
          Memory required for data is: <b id="data_memory">1</b> MB
        </div>
        <div style="margin-bottom: 10px;">
          <!--(measured by floating-point calculation)-->
          Calculation magnitude: <b id="calculation">1</b>
        </div>
        <div style="margin-bottom: 10px;">
          <div id="propertiesPanel" style="display: none; background-color: aliceblue; border: solid 1px black; overflow-x: auto;padding:10px;">
            <b>Layer Parameter</b><br />
            <table id="propertiesTable">
            <tr>
              <td>name:</td>
              <td><input type="text" id="name" value="" onchange="updateData(this.value, 'name')" /></td>
            </tr>
            <tr>
              <td>type:</td>
              <td><input type="text" id="category" value=""  disabled/></td>
            </tr>
            </table>
          </div>
        </div>
        <div style="margin-top:10px">
          <textarea id="prototxt" style="width:100%;height:300px;display:block;">
          </textarea>
        </div>
    </span>

  </div>

  <textarea id="mySavedModel" style="width:100%;height:300px;display:block;">
{ "class": "go.GraphLinksModel",
  "linkFromPortIdProperty": "fromPort",
  "linkToPortIdProperty": "toPort",
  "nodeDataArray": [
{"key":"ipTRAIN***", "name":"ip", "category":"ok", "num_output":"42", "phase":"TRAIN", "loc":"-45 -315", "weight_filler":"default", "bias_filler":"default"},
{"key":"loss***", "name":"loss", "category":"SOFTMAX_LOSS", "loc":"-45 -475"},
{"key":"conv4***", "name":"conv4", "category":"CONVOLUTION", "num_output":"128", "kernel_size":"4", "stride":"1", "pad":"0", "loc":"-45 165", "weight_filler":"default", "bias_filler":"default"},
{"key":"pool4***", "name":"pool4", "category":"POOLING", "pooling_parampool":"MAX", "kernel_size":"2", "stride":"2", "pad":"0", "loc":"-45 -155"},
{"key":"relu4***", "name":"relu4", "category":"RELU", "loc":"-45 5"},
{"key":"dataTRAIN***", "name":"data", "category":"RAW_DATA", "data_source":"/data1/gaoy/xfsj/train002.bin", "label_source":"/data1/gaoy/xfsj/imagelist_train.label.meta", "batch_size":"64", "num":"509332", "height":"55", "width":"47", "channel":"3", "use_memory":"false", "phase":"TRAIN", "loc":"-45 325"},
{"key":"dataTEST***", "name":"data", "category":"RAW_DATA", "data_source":"/data1/gaoy/xfsj/test002.bin", "label_source":"/data1/gaoy/xfsj/imagelist_test.label.meta", "batch_size":"8", "num":"8000", "height":"55", "width":"47", "channel":"3", "use_memory":"false", "phase":"TEST", "loc":"55 325"},
{"key":"ip", "name":"ip", "category":"BLOB", "loc":"-45 -395"},
{"key":"pool4", "name":"pool4", "category":"BLOB", "loc":"-45 -235"},
{"key":"label", "name":"label", "category":"BLOB", "loc":"5 245"},
{"key":"conv4", "name":"conv4", "category":"BLOB", "loc":"-45 85"},
{"key":"data", "name":"data", "category":"BLOB", "loc":"-95 245"},
{"key":"relu4", "name":"relu4", "category":"BLOB", "loc":"-45 -75"}
 ],
  "linkDataArray": [
{"from":"ipTRAIN***", "to":"ip", "fromPort":"T", "toPort":"B", "points":[  ]},
{"from":"pool4", "to":"ipTRAIN***", "fromPort":"T", "toPort":"B", "points":[  ]},
{"from":"ip", "to":"loss***", "fromPort":"T", "toPort":"B", "points":[  ]},
{"from":"label", "to":"loss***", "fromPort":"T", "toPort":"B", "points":[  ]},
{"from":"conv4***", "to":"conv4", "fromPort":"T", "toPort":"B", "points":[  ]},
{"from":"data", "to":"conv4***", "fromPort":"T", "toPort":"B", "points":[  ]},
{"from":"pool4***", "to":"pool4", "fromPort":"T", "toPort":"B", "points":[  ]},
{"from":"relu4", "to":"pool4***", "fromPort":"T", "toPort":"B", "points":[  ]},
{"from":"relu4***", "to":"relu4", "fromPort":"T", "toPort":"B", "points":[  ]},
{"from":"conv4", "to":"relu4***", "fromPort":"T", "toPort":"B", "points":[  ]},
{"from":"dataTRAIN***", "to":"data", "fromPort":"T", "toPort":"B", "points":[  ]},
{"from":"dataTRAIN***", "to":"label", "fromPort":"T", "toPort":"B", "points":[  ]},
{"from":"dataTEST***", "to":"data", "fromPort":"T", "toPort":"B", "points":[  ]},
{"from":"dataTEST***", "to":"label", "fromPort":"T", "toPort":"B", "points":[  ]}
 ]}
  </textarea>

  <button onclick="save_to_image()" style="display:none;">Render as image</button>
  <button onclick="makeSVG()" style="display:none;">Render as SVG</button>
  <div id="SVGArea"></div>
  <div id="newArea"></div>
  <div>
    <p>This page is created by HTML5 Canvas and GoJS plugin.</p>
    <div style="display:none;">
    <p>The example shown above can be found at <a href="http://caffe.berkeleyvision.org/tutorial/fig/logreg.jpg">caffe blob</a></p>
    <p>Usage:</p>
    <li>Drag the objects on the left to right canvas.</li>
    <li>Draw line from top to bottom.(Corresponding to caffe setting)</li>
    <li>Support some basic shortcut key.(e.g. 'Delete','Ctrl+Z','Ctrl+Y') </li>
    <li>Generate prototxt by canvas object.</li>
    <li>Click on a layer and show its parameter.(e.g. click 'DATA' and show 'source, batch_size, ...')</li>
    <li>Upload a prototxt file and transform it to an editable image.</li>
    <p>TODO:</p>
    </div>
  </div>
</div>
</body>
</html>
